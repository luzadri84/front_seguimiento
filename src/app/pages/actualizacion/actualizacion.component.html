<div class="row animated fadeIn">
    <dx-load-panel
        #loadPanel
        shadingColor="rgba(0,0,0,0.4)"
        [position]="{ of: '#divForm' }"
        [(visible)]="loadingVisible"
        [showIndicator]="true"
        [showPane]="true"
        [shading]="true"
        message="Cargando, por favor espere."
        [closeOnOutsideClick]="false">
    </dx-load-panel>
    <div class="col-md-12">
        <div class="card">
            <div class="card-body">
                <h4 style="text-align: justify;">Proyecto</h4><br />
                
                <hr>
                <form ngNativeValidate #formIP="ngForm" (ngSubmit)="actualizarProyecto(formIP.valid)">


                    <div class="row">
                        <div id="label" class="col-md-4" style="text-align: justify;">
                            Supervisor
                        </div>
                        <div class="col-md-8">
                            <select name="supervisor" class="form-control" [(ngModel)]="proyectoActualizacion.proUsuarioAsignado"
                                required >
                                <option value="">Seleccione</option>
                                <option *ngFor="let item of supervisor" [ngValue]="item.id">
                                    {{item.nombrecompleto}}</option>
                            </select> 
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div id="label" class="col-md-4" style="text-align: justify;">
                            Zonas
                        </div>
                        <div class="col-md-8">
                            <select name="zonas" class="form-control" [(ngModel)]="proyectoActualizacion.zonaId"
                                required >
                                <option value="">Seleccione</option>
                                <option *ngFor="let item of zonas" [ngValue]="item.zonId">
                                    {{item.zonaNombre}}</option>
                            </select> 
                        </div>
                    </div>
                    <br />
                    <div id="label" class="row">
                        <div class="col-md-4" style="text-align: left;">
                            Fecha de entrega al Supervisor
                        </div>
                        <div class="col-md-8">
                            <input name="proFechaEntregadoSupervisor" type="date" class="form-control"
                                [(ngModel)]="proyectoActualizacion.proFechaEntregadoSupervisor" required>
                        </div>
                    </div>
                    <br />
                    <div class="row">
                        <div id="label" class="col-md-4" style="text-align: justify;">
                            Estado
                        </div>
                        <div class="col-md-8">
                            <select name="proEstadoSeguimiento" class="form-control" [(ngModel)]="proyectoActualizacion.proEstadoSeguimiento"
                                required >
                                <option value="">Seleccione</option>
                                <option *ngFor="let item of estados" [ngValue]="item.proEstado">
                                    {{item.proNombreEstado}}</option>
                            </select> 
                        </div>
                    </div>

                    <br />
                    <div id="label" class="row">
                        <div class="col-md-4" style="text-align: left;">
                            Fecha Prorroga
                        </div>
                        <div class="col-md-8">
                            <input name="proFechaProrroga" type="date" class="form-control"
                                [(ngModel)]="proyectoActualizacion.proFechaProrroga" required>
                        </div>
                    </div>
                    <br />
                    <div id="label" class="row">
                        <div class="col-md-4" style="text-align: left;">
                            Fecha de Estado
                        </div>
                        <div class="col-md-8">
                            <input name="proFechaEstado" type="date" class="form-control"
                                [(ngModel)]="proyectoActualizacion.proFechaEstado" required>
                        </div>
                    </div>
                    <br />
                    <div id="label" class="row">
                        <div class="col-md-4" style="text-align: left;">
                            Fecha de Radicación
                        </div>
                        <div class="col-md-8">
                            <input name="proFechaRadicacionSeguimiento" type="date" class="form-control"
                                [(ngModel)]="proyectoActualizacion.proFechaRadicacionSeguimiento" required>
                        </div>
                    </div>

                    <br />
                    <div id="label" class="row">
                        <div class="col-md-4" style="text-align: left;">
                            Cuentas por Pagar
                        </div>
                        <div class="col-md-8">
                            <input name="proCuentasPagar" type="text" class="form-control"
                                [(ngModel)]="proyectoActualizacion.proCuentasPagar" required>
                        </div>
                    </div>

                    <br />
                    <div id="label" class="row">
                        <div class="col-md-4" style="text-align: left;">
                            Observaciones
                        </div>
                        <div class="col-md-8">
                            <textarea   name="proEstadoObservaciones"  class="form-control"
                                [(ngModel)]="proyectoActualizacion.proEstadoObservaciones" required></textarea>
                        </div>
                    </div>

                    <br />
                    <div class='row'>
                        <div class="col-sm-12 text-center">
                            <button class="btn btn-primary" *ngIf="permiteedicion" type="submit"
                                >Guardar</button>
                            &nbsp;
                            <a [routerLink]="['/resultados']">
                                <button class="btn btn-primary" type="button">Cancelar</button>
                            </a>
                        </div>
                    </div>
                </form>


                <dx-data-grid id="gridContainer" [dataSource]="historicoSeguimiento" keyExpr="proId"
                [allowColumnResizing]="true"     [columnAutoWidth]="true"     
                [allowColumnReordering]="true"   [showBorders]="true">
                <dxo-paging [enabled]="true" [pageSize]="5"></dxo-paging>
                <dxo-scrolling columnRenderingMode="virtual"></dxo-scrolling>
                <dxo-pager 
                    [showPageSizeSelector]="true"
                    [allowedPageSizes]="[5, 10, 20]"
                    [showInfo]="true">
                </dxo-pager>
                <dxo-filter-row  [visible]="true"  [applyFilter]="currentFilter"></dxo-filter-row> 
                <dxo-header-filter [visible]="true"></dxo-header-filter>
                <dxo-search-panel [visible]="true"></dxo-search-panel>
                        <dxi-column dataField="supervidor" caption="Supervisor"></dxi-column>
                        <dxi-column dataField="zona" caption="Zona"></dxi-column>
                        <dxi-column dataField="proFechaEntregadoSupervisor" caption="Fecha Entregado Supervisor"></dxi-column>
                        <dxi-column dataField="estado" caption="Estado"></dxi-column>
                        <dxi-column dataField="proFechaProrroga" caption="Fecha Prorroga"></dxi-column>
                        <dxi-column dataField="proFechaEstado" caption="Fecha Estado"></dxi-column>
                        <dxi-column dataField="proFechaRadicacionSeguimiento" caption="Fecha Radicación Seguimiento"></dxi-column>
                        <dxi-column dataField="proCuentasPagar" caption="Cuentas por Pagar"></dxi-column>
                        <dxi-column dataField="proEstadoObservaciones" caption="Observaciones"></dxi-column>
                        <dxi-column dataField="usuModifico" caption="Usuario Modifico"></dxi-column>
                        <dxi-column dataField="fecModifico" caption="Fecha Modifico"></dxi-column>
                </dx-data-grid> 

            </div>
        </div>
    </div>
</div>
